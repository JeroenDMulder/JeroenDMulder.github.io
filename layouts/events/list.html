{{ define "main" }}
<section id="upcoming-events">
  <h2>Upcoming Events</h2>
  {{ $now := now }}
  {{ $upcoming := where .Pages ".Params.date" ">" $now }}
  {{ if $upcoming }}
    {{ partial "events" (dict "items" $upcoming "view" "compact") }}
  {{ else }}
    <p>No upcoming events at this time.</p>
  {{ end }}
</section>

<section id="past-events">
  <h2>Past Events</h2>
  {{ $past := where .Pages ".Params.date" "<=" $now }}
  {{ if $past }}
    {{ partial "events" (dict "items" $past "view" "compact") }}
  {{ else }}
    <p>No past events available.</p>
  {{ end }}
</section>
{{ end }}
